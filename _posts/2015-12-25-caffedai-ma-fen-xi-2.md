---
layout: post
title: "Caffe代码分析(2)"
modified: 2015-12-25 20:24:49 +0800
tags: [Caffe,Deep Learning,C++]
image:
  feature: abstract-17.png
  credit: 
  creditlink: http://www.rafaelgrossmann.com/deep-really-deep-learning/ 
comments: 
share: 
---

本文将通过一个简单的例子来展示Caffe是如何使用`Google Protocol Buffer`来完成`Solver`和`Net`的定义。

首先我们需要了解`Google Protocol Buffer`定义data schema的方式，下面是官网上一个典型的AddressBook例子：

<!DOCTYPE html>
<html>
<head>
<meta charset="ISO-8859-1">
<title>/Users/Apple/Documents/CodeForKeynote/code.cpp</title>
<link rel="stylesheet" type="text/css" href="highlight.css">
</head>
<body class="hl">
<pre class="hl">package tutorial<span class="hl opt">;</span>

message Person <span class="hl opt">{</span>
  required string name <span class="hl opt">=</span> <span class="hl num">1</span><span class="hl opt">;</span>
  required int32 id <span class="hl opt">=</span> <span class="hl num">2</span><span class="hl opt">;</span>
  optional string email <span class="hl opt">=</span> <span class="hl num">3</span><span class="hl opt">;</span>

  <span class="hl kwb">enum</span> PhoneType <span class="hl opt">{</span>
    MOBILE <span class="hl opt">=</span> <span class="hl num">0</span><span class="hl opt">;</span>
    HOME <span class="hl opt">=</span> <span class="hl num">1</span><span class="hl opt">;</span>
    WORK <span class="hl opt">=</span> <span class="hl num">2</span><span class="hl opt">;</span>
  <span class="hl opt">}</span>

  message PhoneNumber <span class="hl opt">{</span>
    required string number <span class="hl opt">=</span> <span class="hl num">1</span><span class="hl opt">;</span>
    optional PhoneType type <span class="hl opt">=</span> <span class="hl num">2</span> <span class="hl opt">[</span><span class="hl kwa">default</span> <span class="hl opt">=</span> HOME<span class="hl opt">];</span>
  <span class="hl opt">}</span>

  repeated PhoneNumber phone <span class="hl opt">=</span> <span class="hl num">4</span><span class="hl opt">;</span>
<span class="hl opt">}</span>

message AddressBook <span class="hl opt">{</span>
  repeated Person person <span class="hl opt">=</span> <span class="hl num">1</span><span class="hl opt">;</span>
<span class="hl opt">}</span>
</pre>
</body>
</html>
<!--HTML generated by highlight 3.18, http://www.andre-simon.de/-->
